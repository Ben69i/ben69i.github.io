<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lyra Optics</title>
    <link rel="stylesheet" href="style_blog.css">
</head>

<body>
    <!-- Navigation -->
    <header>
        <nav class="navbar">
            <a href="#" class="logo-text">Lyra Optics</a>
            <div class="menu" id="navbar-links">
                <a href="index.html">Home</a>
                <a href="#products">Products</a>
                <a href="#contact">Contact</a>
                <a href="#about">About Us</a>
                <a href="#news">News</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Excellence in Optical Solutions</h1>
            <p>Your trusted source for cutting-edge optical technology.</p>
            <a href="#contact" class="cta-button">Get in Touch</a>
        </div>
    </section>

    <!-- News Section -->
    <section id="news" class="news-container">
        <h2>Latest News</h2>
        
        <!-- News Grid -->
        <div id="news-grid" class="news-grid">
            <!-- News articles will appear here -->
        </div>

        <!-- News Form -->
        <div class="news-form">
            <h3>Post a News Article</h3>
            <input type="text" id="news-title" placeholder="News Title" required>
            <textarea id="news-content" placeholder="News Content" rows="4" required></textarea>
            <input type="text" id="news-author" placeholder="Author Name" required>
            <input type="datetime-local" id="news-date" required>
            <input type="file" id="news-image" accept="image/*" required>
            <button type="button" id="add-news" class="cta-button">Publish News</button>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>Â© 2024 Lyra Optics. All rights reserved.</p>
        <div class="social-icons">
            <a href="https://www.instagram.com/hadi_lotfizadeh" target="_blank">Instagram</a>
            <a href="https://t.me/+989125936346" target="+989125936346">Telegram</a>
            <a href="https://api.whatsapp.com/send?phone=989125936346" target="+989125936346">WhatsApp</a>
        </div>
    </footer>

    <script>
        // Predefined authorization key
        const AUTHORIZATION_KEY = "LyraAdmin2024";

        // Function to load news from localStorage and display it
        function loadNews() {
            const newsGrid = document.getElementById('news-grid');
            const newsData = JSON.parse(localStorage.getItem('newsArticles')) || [];
            newsGrid.innerHTML = ''; // Clear current grid

            newsData.forEach((article, index) => {
                const newsItem = `
                    <div class="news-item">
                        <img src="${article.image}" alt="News Image" class="news-image">
                        <h3>${article.title}</h3>
                        <p>${article.content}</p>
                        <p><strong>By:</strong> ${article.author} | <strong>Published on:</strong> ${new Date(article.date).toLocaleString()}</p>
                        <a href="#" class="read-more" onclick="showFullArticle(${index})">Read More</a>
                        <button class="remove-news" data-index="${index}">Remove</button>
                    </div>
                `;
                newsGrid.innerHTML += newsItem;
            });

            // Handle remove news button
            document.querySelectorAll('.remove-news').forEach(button => {
                button.addEventListener('click', function () {
                    const index = button.getAttribute('data-index');
                    const enteredKey = prompt("Enter the authorization key to remove this news article:");

                    if (enteredKey === AUTHORIZATION_KEY) {
                        removeNewsArticle(index);
                    } else {
                        alert("Unauthorized! You do not have permission to remove this article.");
                    }
                });
            });
        }

        // Handle News Form Submission
        document.getElementById('add-news').addEventListener('click', function () {
            const enteredKey = prompt("Enter the authorization key to publish news:");

            if (enteredKey === AUTHORIZATION_KEY) {
                const title = document.getElementById('news-title').value;
                const content = document.getElementById('news-content').value;
                const author = document.getElementById('news-author').value;
                const date = document.getElementById('news-date').value;
                const image = document.getElementById('news-image').files[0];

                if (title && content && author && date && image) {
                    const reader = new FileReader();
                    reader.onload = function () {
                        const imgSrc = reader.result;

                        const newArticle = {
                            title,
                            content: content.substring(0, 150) + '...', // Shorten preview content
                            fullContent: content,
                            author,
                            date,
                            image: imgSrc
                        };

                        const newsData = JSON.parse(localStorage.getItem('newsArticles')) || [];
                        newsData.push(newArticle);
                        localStorage.setItem('newsArticles', JSON.stringify(newsData));

                        loadNews();
                    };
                    reader.readAsDataURL(image);
                } else {
                    alert('Please fill in all fields!');
                }
            } else {
                alert("Unauthorized! You do not have permission to publish news.");
            }
        });

        // Function to remove news article
        function removeNewsArticle(index) {
            const newsData = JSON.parse(localStorage.getItem('newsArticles')) || [];
            newsData.splice(index, 1); // Remove article from array
            localStorage.setItem('newsArticles', JSON.stringify(newsData)); // Save updated data
            loadNews(); // Reload news after removal
        }

        // Show full article
        function showFullArticle(index) {
            const newsData = JSON.parse(localStorage.getItem('newsArticles')) || [];
            const article = newsData[index];
            alert(`Full Article:\n\n${article.fullContent}`);
        }

        // Load news articles on page load
        window.onload = loadNews;
    </script>
</body>

</html>
